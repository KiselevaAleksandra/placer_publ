# Лабораторная работа "Intelligent Placer"
## Постановка задачи
На вход поступает фотография в формате .jpg, на которой на однотонной горизонтальной поверхности изображены один или несколько предметов, выбранных из заранее заготовленных и отснятых (см. пункт "Список предметов"), а также нарисованный на белом листе бумаги А4 многоугольник. Необходимо определить, можно ли данные предметы поместить в данный многоугольник одновременно так, чтобы никакая часть предметов не выходила за границы многоугольника. В качестве выходных данных в консоль выводится результат в виде одного из слов:

Yes - предметы можно разместить в многоугольнике

No - предметы нельзя разместить в прямоугольнике или входные данные неверные

## Список предметов
1. Замазка
2. Расческа
3. Скотч
4. Ножницы
5. Флешка
6. Набор закладок
7. Транспортир
8. Клубок ниток
9. Губная помада
10. Игрушка

## Фотографии предметов
Примеры предметов находятся в документе "Data.md"

## Набор входных данных для тестирования
Набор входных данных вместе с ожидаемым результатом работы находится в документе "Data.md"

## Требования
### К фотографиям
1. Формат фотографий - .jpg 
2. Условия съемки: 
Фотографии сделаны отчетливо, без бликов или интенсивных теней, на одну и ту же камеру.
Цвет фона - однотонный, темнее листа бумаги.
Расположение камеры - сверху перпендикулярно предмету без существенных отклонений (не более 10 градусов).
Ориентация фотографий может быть произвольной.

### К предметам:
Предметы по размеру не могут быть больше листа бумаги А4.
Предметы не сливаются с листом бумаги и не накладываются друг на друга.
Границы предмета чёткие.
Предмет на фотографии может быть только в единственном экземпляре.

### К поверхности:
Поверхность горизонтальная, темнее листа бумаги, однотонная.
На поверхности полностью помещается лист бумаги и предметы.
Поверхность выбирается однажды и не меняется для каждой фотографии.

### К исходным данным
В качестве исходных данных используются фотографии, на которых в центре белого листа А4 расположен по очереди каждый предмет. Всего предметов 10. Лист помещается на фотографию полностью. Фотографии сделаны согласно всем требованиям к фотографии. 

### К входным данным
В качестве входных данных подаётся фотография, сделанная по всем требованиям. 
На фотографии находится белый лист бумаги А4, на котором отчетливо нарисован многоугольник, а так же один или несколько предметов.
Предметы выбранны из заранее заготовленных и находятся в непосредственной близости от листа бумаги. Лист полностью помещается на фотографию.
Лист бумаги и предметы не перекрывают друг друга.

## План решения задачи

### Распознавание предметов с заранее сделанных фотографий
1.  Перевести изображение из RGB в grayscale.
2.  Бинаризовать изображение.
3.	Найти границы предмета с использованием алгоритма Кэнни, убрать шумы (морфологические операции).
4.  Отобрать нужные границы, закрыв с помощью морфологии те границы и пространство, которые лежат внутри основных границ (в случае скотча или ножниц, у которых есть пустоты)
5.  Заранее подсчитать площадь каждого предмета с помощью границ, воспользовавшись Cv2, и сохранить ее.

### Распознавание многоугольника и предметов 
1.  Перевести изображение из RGB в grayscale.
2.	Найти границы предметов и многоугольника с использованием алгоритма Кэнни, убрать шумы (морфологические операции).
3.	Отделить многоугольник от предметов. Предполагаемое решение: многоугольник искать, используя информацию о его расположении на белом листе (сначала воспользоваться бинаризацией, а потом найти границы многоугольника), предметы – используя информацию о расположении на фоне (искать границы предметов в той части изображения, где не были распознаны границы листа).
4.	Если предметы или многоугольник не найдены или многоугольник незамкнут, то работа завершается, выводится No. 
5.  Образы предметов, которые были распознаны, с помощью особых точек (определенных детектором Харриса) сопоставить с образами предметов с заранее сделанных фотографий. Это нужно для того, чтобы сразу понять площадь данных объектов, не находя ее каждый раз заново. Также можно размещать внутри многоугольника именно заранее сделанные предметы, так как их определение, возможно, точнее.
6.  Если предмет не удалось сопоставить ни с каким заранее известным предметом, то работа завершается, выводится Nо.
7.  Подсчитать площадь многоугольника с помощью границ, воспользовавшись Cv2.

### Размещение предметов в многоугольнике
1.	Найти сумму площадей распознанных предметов, сравнить с площадью многоугольника. 

    Если площадь многоугольника оказалась меньше, то работа завершается, выводится No.
2.	В цикле по одному предмету в порядке уменьшения площади размещать внутри многоугольника: перемещать его сначала по оси x, затем по оси у на определенный шаг.

    Размещение проводить до соприкосновения с границами предыдущих объектов и/или многоугольника (или только многоугольника в случае первого объекта).
    
    Если разместить не удалось, то перебирать варианты вращения предметов на заданный угол. 
    
    Если варианты вращение исчерпались, но предмет разместить не удалось, то работа завершается, выводится No. 
    
    (Второй вариант размещения - параллельным переносом, но он сильно ограничивает функциональность алгоритма.)
3.	Если все предметы удалось разместить, то работа завершается, выводится Yes.




